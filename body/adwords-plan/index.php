<div id="index-congculapkehoach" class="page-wrapper">
    <div class="bg-similar"></div>
    <div class="container-fluid p-0">
        <div class="page-content">
            <div class="planning-wrapper">
                <div class="planContainer w-100">
                    <div class="text-white text-center pt-5 font-gg display-7">Lập Kế Hoạch Quảng Cáo</div>
                    <div class="mt-1 text-center text-white">
                        <span class="sub-tilte-content">Thiết bị: </span><span class="sub-content">PC</span> |
                        <span class="sub-tilte-content">Ngày: </span><span class="sub-content data-time-nav"></span> |
                        <span class="sub-tilte-content">Giới hạn: </span>
                        <span class="sub-content text-danger">5/5</span> |
                        <a href="#" class="sub-tilte-content">Nâng cấp VIP</a>
                    </div>
                    <div class="text-white text-center font-14 mt-1 mb-4 font-gg px-2">
                    Lập Kế Hoạch Quảng Cáo ước tính chi phí quảng cáo, số click chuột và số khách hàng trong nháy mắt
                    </div>
                    <div class="formGroupV1">
                        <input type="text" value="<?=@$url?>" placeholder="Ví dụ: fff.com.vn" class="input input-domain"
                            name="domain" id="domain">
                        <input type="text" value="<?=@$keyword?>" placeholder="Ví dụ: Từ khoá 1, Từ khoá 2"
                            class="input input-keywords input-100" name="keywords" id="keywords">
                        <input type="text" value="<?=@$conversions?>" name="conversions" id="conversions"
                            class="input input-conversions input-number" style="width:100%"
                            placeholder="Số khách hàng mong muốn">
                        <!-- <span class="mybtn submitLenkehoach">LÊN KẾ HOẠCH</span> -->
                        <button
                            class="submitLenkehoach btn btn-success text-uppercase flex-shrink-0 ml-md-2 px-4 shadow w-100 w-lg-15 mt-4 mt-md-0"
                            style="max-width: 150px; white-space: nowrap">LÊN KẾ HOẠCH</button>
                    </div>
                </div>
                <div class="tbDalapkehoach">
                    <h3 class="text-uppercase font-gg">Các Website Đã Lập Kế Hoạch Thành Công</h3>
                    <div class="autoScroll">
                        <table class="table tableConfig" id="listSetAdsSuccess">
                            <thead class="text-muted">
                                <tr>
                                    <th>STT</th>
                                    <th>Trang web</th>
                                    <th>Mục Tiêu</th>
                                    <th>Chi phí dự kiến</th>

                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>

                            </tbody>
                        </table>
                    </div>
                    <!-- <div class="text-center p-t-20"><span class="mybtnLenKeHoach">LÊN KẾ HOẠCH</span></div> --> 
                </div>

                <div class="row justify-content-center mt-5" id="content-tool" style="width: 100%;  max-width: 1100px; margin: 0 auto; position: relative;">
                        <div class="col-12 col-lg-6 mb-5 px-0 px-md-3">
                            <div id="PhanTichWebsiteDoiThu"
                                class="card text-left m-auto bg-white shadow-sm rounded cursor-pointer"
                                data-href="https://go.fff.com.vn/?view=traffic-website&amp;action=index">
                                <div class="text-right m-3 pb-3">
                                    <span class="px-2 py-1 rounded font-12 font-weight-bold font-gg text-info">Miễn
                                        Phí</span>
                                </div>
                                <div class="rounded-pill m-auto text-center d-flex no-block justify-content-center"
                                    style="width: 100px; height:100px; background-color: rgba(122,172,237,.1)">
                                    <i class="fad fa-send-backward align-self-center"
                                        style="font-size: 30px; color: rgb(90, 121, 188);"></i>
                                </div>
                                <div class="card-body m-auto">
                                    <div
                                        class="card-title text-center text-dark font-weight-500 font-gg font-18 text-capitalize">
                                        Phân tích website đối thủ
                                    </div>
                                    <div class="des text-center font-14 font-gg text-muted mt-3" style="height: 40px">
                                        Phân tích traffic website bất kỳ, tìm hiểu nguồn khách hàng của đối thủ
                                    </div>
                                    <div class="mt-4 text-center d-flex no-block flex-row justify-content-center">
                                        <!-- <div class="d-none mr-5">
                                        <i class="fad fa-eye font-16 mr-1 align-self-center" style="color:#5a79bc"></i>
                                        <strong
                                            class="align-self-center font-gg font-weight-bold text-muted">1,111</strong>
                                    </div>
                                    <div class="d-none">
                                        <i class="fad fa-bullseye-pointer font-16 mr-1 align-self-center"
                                            style="color:#5a79bc"></i>
                                        <strong
                                            class="align-self-center font-gg font-weight-bold text-muted">111</strong>
                                    </div> -->
                                    </div>
                                </div>
                                <div class="text-center mt-3 mb-5">
                                    <a class="font-gg font-14 font-weight-bold bagPrimary" data-toggle="tooltip"
                                        data-placement="top" title=""
                                        href="https://go.fff.com.vn/?view=traffic-website&amp;action=index"
                                        data-original-title="" style="padding: 15px 40px !important;">Trải Nghiệm <i
                                            class="font-weight-bold fal fa-angle-right"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6 mb-4 px-0 px-md-3">
                            <div id="PhanTichTuKhoa"
                                class="card text-left m-auto bg-white shadow-sm rounded cursor-pointer"
                                data-href="https://go.fff.com.vn/?view=keywords&amp;action=index">
                                <div class="text-right m-3 pb-3">
                                    <span class="px-2 py-1 rounded font-12 font-weight-bold font-gg text-info">Miễn
                                        Phí</span>
                                </div>
                                <div class="rounded-pill m-auto text-center d-flex no-block justify-content-center"
                                    style="width: 100px; height:100px; background-color: rgba(10,187,135,.1)">
                                    <i class="fad fa-window-alt align-self-center"
                                        style="font-size: 30px; color: rgb(0, 176, 173);"></i>
                                </div>
                                <div class="card-body m-auto">
                                    <div
                                        class="card-title text-center text-dark font-weight-500 font-gg font-18 text-capitalize">
                                        Phân tích từ khóa
                                    </div>
                                    <div class="des text-center font-14 font-gg text-muted mt-3" style="height: 40px">
                                        Phân tích, lựa chọn từ khóa tốt nhất cho SEO và SEM
                                    </div>
                                    <div class="mt-4 text-center d-flex no-block flex-row justify-content-center">
                                        <!-- <div class="d-none mr-5">
                                        <i class="fad fa-eye font-16 mr-1 align-self-center" style="color:#00b0ad"></i>
                                        <strong
                                            class="align-self-center font-gg font-weight-bold text-muted">1,231</strong>
                                    </div>
                                    <div class="d-none">
                                        <i class="fad fa-bullseye-pointer font-16 mr-1 align-self-center"
                                            style="color:#00b0ad"></i>
                                        <strong
                                            class="align-self-center font-gg font-weight-bold text-muted">123</strong>
                                    </div> -->
                                    </div>
                                </div>
                                <div class="text-center mt-3 mb-5">
                                    <a class="font-gg font-14 font-weight-bold bagSuccess" data-toggle="tooltip"
                                        data-placement="top" title=""
                                        href="https://go.fff.com.vn/?view=keywords&amp;action=index"
                                        data-original-title="" style="padding: 15px 40px !important;">Trải Nghiệm <i
                                            class="font-weight-bold fal fa-angle-right"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>


            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
function formatNumber(nStr) {
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
}
$.post("//fff.com.vn/api/getListWebsitePlanner.php", {
    request: "getListAdsSuccess"
}, function(result) {
    result = JSON.parse(result);
    var stt = 1;
    result.forEach(element => {
        $("#listSetAdsSuccess tbody").append(`
            <tr>
                <td>${stt++}</td>
                <td><a href="/?view=adwords-plan&action=result&domain=${element.domain}&keywords=${element.keywords}&conversions=${element.conversions}"><img class="websiteFavoriteIcon mr-1" src="https://www.google.com/s2/favicons?domain=${element.domain}"> ${element.domain}</a></td>
                <td>${formatNumber(element.conversions)} khách hàng</td>
                <td>${formatNumber(element.planCost)}<sup>&nbsp;vnđ</sup></td>
                <td class="d-none"><a href="/?view=adwords-plan&action=result&domain=${element.domain}&keywords=${element.keywords}&conversions=${element.conversions}">Xem</a></td>
            </tr>
        
        `);
    });

});

function getHost(url) {
    var a = document.createElement('a');
    a.href = url;
    return a.hostname;
}

function CheckIsValidDomain(domain) {
    var re = new RegExp(/^((?:(?:(?:\w[\.\-\+]?)*)\w)+)((?:(?:(?:\w[\.\-\+]?){0,62})\w)+)\.(\w{2,6})$/);
    return domain.match(re);

}
jQuery(document).ready(function($) {

    $(".submitLenkehoach").click(function() {
        doLapKeHoach();

    });

    function doLapKeHoach() {
        var domain = $(".input-domain").val();
        var conversions = $(".input-conversions").val().replace(/\,+/g, '')
        var keywords = $(".input-keywords").val();
        if (conversions == undefined) conversions = 0;
        if (conversions < 10) {
            Swal.fire({
                type: 'error',
                title: 'Khách hàng quá ít',
                html: 'Vui lòng tăng thêm <strong>số khách hàng mong muốn</strong> để hệ thống có thể hoạt động',
            });
            return false;
        }
        if (domain.indexOf("http") > 0) {
            var url = new URL(domain);
            domain = url.hostname;
        }

        if (CheckIsValidDomain(domain)) {
            url = "?view=adwords-plan&action=result&domain=" + domain + "&keywords=" +
                keywords + "&conversions=" + conversions;
            window.location.href = url;
        } else {
            Swal.fire({
                type: 'error',
                title: 'Có lỗi',
                text: 'Vui lòng nhập 1 tên miền (domain) hợp lệ',

            })
        }
    }
    $('.input').keypress(function(e) {
        if (e.which == 13) {
            doLapKeHoach();
        }
    });

    $('.input-number').keyup(function(event) {

        // skip for arrow keys
        if (event.which >= 37 && event.which <= 40) return;

        // format number
        $(this).val(function(index, value) {
            return value
                .replace(/\D/g, "")
                .replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        });
    });

});
</script>